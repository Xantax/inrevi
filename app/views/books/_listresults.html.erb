<% if @books %>
  <div class="paginate pull-right">
    <% page = params[:page] || 1 %>
    <% next_page = page.to_i + 1 %>
    <% previous_page = page.to_i - 1 %>
    <% if previous_page > 0 %>
      <%= link_to "Previous Page", search_path(params.merge(page: page.to_i - 1)) %>
    <% end %>
    <%= "Page #{page}/#{(@books.total_items.to_f/ Book::PER_PAGE).ceil}" %>
    <% if next_page <= (@books.total_items.to_f/ Book::PER_PAGE).ceil %>
      <%= link_to "Next Page", search_path(params.merge(page: page.to_i + 1)) %>
    <% end %>
  </div>
<% end %>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Cover</th>
      <th>Title</th>
      <th>Author</th>
      <th>Category</th>
    </tr>
  </thead>
  <tbody>
    <% if @books %>
      <% @books.each do |book| %>
        <tr>
          <td>
            <%= image_tag book.image_link %>
          </td>
          <td>
            <%= link_to book.title, book_path(book.id) %>
          </td>
          <td>
            <%= book.authors %>
          </td>
          <td>
            <%= book.categories %>
          </td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>