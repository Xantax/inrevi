<% provide(:title, 'Hotels, Bars, Doctors...') %>
<div class="row">

  <div class="col-sm-2 categories">
    <%= render 'shared/categories' %>
  </div>
  
  <div class="col-sm-10">
    <div class="allnews">
      
  <% model_class = Local %>
    <div class="search-box">
      <%= render 'search_form' %>
    </div>
      
      <div class="col-sm-6 local">
        <% @results.first(10).each do |result| %><br><br>
          <div class="localindexname"><%= link_to result['name'], local_path(result['factual_id']) %></div>
          <div class="localcategory"><b>Â·</b> <%= result['category_labels'].join(', ') unless result['category_labels'].blank? %></div><br>
              <%= result['address'] %><br>
              <%= result['locality'] %>, 
              <%= result['region'] %>, 
              <%= result['postcode'] %><br>
              <%= result['tel'] %>
          
          <div class="localbottom"></div>
        <% end %>
      </div>
      
      <div class="col-sm-6 localmap"><br><br> 
        
          <div class="paginate pull-right">
            <% page = params[:page] || 1 %>
            <% next_page = page.to_i + 1 %>
            <% previous_page = page.to_i - 1 %>
            <% if previous_page > 0 %>
              <%= link_to "Previous Page", lsearch_path(params.merge(page: page.to_i - 1)) %>
            <% end %>
            <% if next_page <= max_pages(@total_results) %>
              <%= link_to "Next Page", lsearch_path(params.merge(page: page.to_i + 1)) %>
            <% end %>
          </div>
        
        <div id="map-canvas-search" style="width: 300px; height: 200px"></div>
        <% if params[:place].present? && @results.count > 0 %>
        <%= render 'google_map_multi_markers.html.haml', {results: lat_long_places(@results)} %>
        <% end %>
      </div> 
  
    </div> 
  </div> 

</div>
